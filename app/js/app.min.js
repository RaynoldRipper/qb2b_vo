"use strict";var renderedItem,render=0;let ajaxurl="/wp-admin/admin-ajax.php",handlerurl="/wp-content/themes/qb2b-vo/functions/handler.php",ajaxData={action:"handler",nonce_code:myajax.nonce};function toast(e="",t="",n="",a=""){jQuery((function(s){s(document).ready((function(){let i=document.querySelector(".toast-container");if(document.querySelector(".dynamic-toast-wrapper")){let o;document.querySelectorAll(".dynamic-toast-wrapper").forEach(e=>{o=e.dataset.toaster}),o++;let l=document.createElement("div");l.className="dynamic-toast-wrapper dynamic-toast-"+o,l.dataset.toaster=o,l.innerHTML=`\n                <div class="toast dynamic-toast ${n}" role="alert" aria-live="assertive" data-animation="true" aria-atomic="true">\n                    <div class="toast-header">\n                        <div class="sub-logo" class="rounded mr-2"></div>\n                        <strong class="mr-auto">${e}</strong>\n                        <small class="text-muted">${a}</small>\n                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="toast-body">\n                        ${t}\n                    </div>\n                </div>`,i.append(l),s(".dynamic-toast-"+o+" .toast").toast({delay:6e3,autohide:!0}),s(".dynamic-toast-"+o+" .toast").toast("show"),s(".dynamic-toast-"+o+" .toast").on("hidden.bs.toast",e=>{s(".dynamic-toast-"+o).remove()})}else{let o=document.createElement("div");o.className="dynamic-toast-wrapper dynamic-toast-1",o.dataset.toaster=1,o.innerHTML=`\n                <div class="toast dynamic-toast ${n}" role="alert" aria-live="assertive" data-animation="true" aria-atomic="true">\n                    <div class="toast-header">\n                        <div class="sub-logo" class="rounded mr-2"></div>\n                        <strong class="mr-auto">${e}</strong>\n                        <small class="text-muted">${a}</small>\n                        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                        </button>\n                    </div>\n                    <div class="toast-body">\n                        ${t}\n                    </div>\n                </div>`,i.append(o),s(".toast").toast({delay:6e3,autohide:!0}),s(".toast").toast("show"),s(".toast").on("hidden.bs.toast",e=>{s(".dynamic-toast-1").remove()})}}))}))}function ajaxDataReset(){ajaxData={action:"handler",nonce_code:myajax.nonce}}function fadeDelete(e,t){t.style.transition="all ."+e+"s",t.style.opacity="0",setTimeout(()=>{t.style.display="none",t.remove()},e)}function hide(e,t){t.style.transition="all ."+e+"s",t.style.opacity="0",setTimeout(()=>{t.style.display="none"},e)}function show(e,t){t.style.display="block",setTimeout(()=>{t.style.transition="all ."+e+"s",t.style.opacity="1"},1)}function onClickClose(e){var t=0;document.addEventListener("click",(function n(a){if(!e.contains(a.target)&&isVisible(e)&&1==t){if(fadeDelete(300,e),render=0,renderedItem=null,document.removeEventListener("click",n),t=0,e.closest(".company__documents-item").querySelector(".three-dots__btn")){e.closest(".company__documents-item").querySelector(".three-dots__btn").classList.remove("active")}}else t=1}))}function isVisible(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function moreBtn(e){if(event.preventDefault(),e.closest(".company__documents-item")){let t=e.closest(".company__documents-item"),n='<div class="poop">\n                    <h2 class="text-5 wrapper-title pb-1">Действие</h2>\n                    <div class="poop__buttons">\n                        <a href="#" class="poop__btn text-3 poop__btn--success">Скачать файл</a>\n                        <a href="#" class="poop__btn text-3 poop__btn--warninig">Удалить</a>\n                    </div>\n                </div>';if(t!==renderedItem&&null===t.querySelector(".poop")&&0===render){e.classList.add("active"),t.insertAdjacentHTML("beforeend",n),renderedItem=t;let a=t.querySelector(".poop");show(300,a),render=1,onClickClose(a)}else if(t!==renderedItem&&null!=renderedItem&&1===render){let a=renderedItem.querySelector(".poop");renderedItem.querySelector(".three-dots__btn").classList.remove("active"),fadeDelete(300,a),t.insertAdjacentHTML("beforeend",n),e.classList.add("active"),renderedItem=t;let s=t.querySelector(".poop");show(500,s),onClickClose(s),render=1}else if(t==renderedItem&&1===render){let e=renderedItem.querySelector(".poop");renderedItem.querySelector(".three-dots__btn").classList.remove("active"),fadeDelete(300,e),renderedItem="",render=0}}}document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".menu"),t=document.querySelector(".menu__list"),n=document.querySelector(".settings"),a=document.querySelector(".settings__window");if(e.addEventListener("click",(function(){event.preventDefault(),e.classList.toggle("active"),t.classList.toggle("active")})),n.addEventListener("click",(function(){event.preventDefault(),n.classList.toggle("active"),a.classList.toggle("active")})),document.querySelector(".line-form")){let e=document.querySelector(".line-form"),t=(document.querySelectorAll(".line-form__field"),e.querySelectorAll("input[type=text],input[type=tel], input[type=password], input[type=email]"));setTimeout(()=>{t.forEach(e=>{let t=e.closest(".line-form__field");e.value.length>0&&t.classList.add("line-form__field--filled")})},10),t.forEach(e=>{e.addEventListener("focus",t=>{let n=t.target.closest(".line-form__field");n.classList.add("field-focus"),console.log(e.checkValidity()),!0===e.checkValidity()?n.classList.add("field-unvalid"):n.classList.remove("field-unvalid")}),e.addEventListener("blur",t=>{let n=t.target.closest(".line-form__field");n.classList.remove("field-focus"),!0===e.checkValidity()?n.classList.add("field-unvalid"):n.classList.remove("field-unvalid")}),e.addEventListener("input",t=>{let n=e.closest(".line-form__field");e.value.length>0?n.classList.add("line-form__field--filled"):e.value.length<=0&&n.classList.remove("line-form__field--filled"),!0===e.checkValidity()?n.classList.add("field-unvalid"):n.classList.remove("field-unvalid")})})}if(document.querySelector("input[type=text], input[type=number], input[type=tel]")&&!document.querySelector(".line-form")){document.querySelectorAll("input[type=text], input[type=number], input[type=tel], textarea").forEach(e=>{e.addEventListener("input",(function(){var t;e.classList.contains("custom-form__input")?t=".custom-form__input-wrapper":e.classList.contains("custom__text-input")&&(t=".custom__text"),!e.closest(t).classList.contains("input__filled")&&e.value.length>=1?e.closest(t).classList.add("input__filled"):e.value.length<=0&&e.closest(t).classList.remove("input__filled")}))})}if(document.querySelector("input[type=range]")){let e=document.querySelectorAll("input[type=range]"),t=["webkit-slider-runnable","moz-range"],n=[],a=t.length,s=e.length,i=function(e,n){let s="",i=e.min||0,o=(e.max?~~(100*(e.value-i)/(e.max-i)):e.value)+"% 100%";e.previousElementSibling.querySelector(".range__count").textContent=e.value,e.previousElementSibling.querySelector(".range__total").classList.contains("hide")||(e.previousElementSibling.querySelector(".range__total").classList.add("hide"),e.previousElementSibling.querySelector(".range__count").classList.add("active")),e.value<=0&&(e.previousElementSibling.querySelector(".range__total").classList.remove("hide"),e.previousElementSibling.querySelector(".range__count").classList.remove("active"));for(let e=0;e<a;e++)s+="input[type=range][data-rangeId='"+n+"']::-"+t[e]+"-track{background-size:"+o+"} ";return s},o=function(e){let t=i(e.target,this);n[this].textContent=t};for(let t=0;t<s;t++){let a=document.createElement("style");document.body.appendChild(a),n.push(a),e[t].setAttribute("data-rangeId",t),e[t].addEventListener("input",o.bind(t))}e.forEach(e=>{e.addEventListener("input",(function(){let t=e.previousElementSibling.querySelector(".range__count"),n=this.scrollHeight,a=n/2+(this.valueAsNumber-parseInt(this.min))*(this.scrollWidth-n)/(parseInt(this.max)-parseInt(this.min));t.style.left=a-t.offsetWidth/2+"px",this.value>0?this.classList.add("active"):this.classList.remove("active")}))})}if(document.querySelector(".drop-form")){document.querySelector(".drop-form");let e=document.querySelector(".company__drop-field");function s(e){e.preventDefault(),e.stopPropagation()}function i(t){e.classList.add("dragged")}function o(t){e.classList.remove("dragged")}["dragenter","dragover","dragleave","drop"].forEach(t=>{e.addEventListener(t,s,!1),document.body.addEventListener(t,s,!1)}),["dragenter","dragover"].forEach(t=>{e.addEventListener(t,i,!1)}),["dragleave","drop"].forEach(t=>{e.addEventListener(t,o,!1)}),e.addEventListener("drop",(function(e){!function(e){e=[...e],console.log(e),function(e){n.value=0,t=[];for(let n=e;n>0;n--)t.push(0)}(e.length),e.forEach(c),e.forEach(r)}(e.dataTransfer.files)}),!1);let t=[],n=document.querySelector(".progress-bar");function l(e,a){t[e]=a;let s=t.reduce((e,t)=>e+t,0)/t.length;console.debug("update",e,a,s),n.style.width=s+"%"}function r(e){let t,n=(e.size/1024/1024).toFixed(2),a=(e.size/1024).toFixed(2),s=e.name.split(".")[e.name.split(".").length-1],i=document.querySelector(".company__documents-list");t=n<.1?a+" kb":n+"mb";let o=`\n            <div class="company__documents-item mb-3">\n                <div class="company__documents-picture">\n                    <img class="company__documents-image" src="http://192.168.88.59/wp-content/uploads/site-pictures/mime-image.png" alt="">\n                </div>\n                <div class="company__documents-descriptins">\n                    <div class="company__documents-name text-4">${e.name}</div>\n                    <div class="company__documents-type text-3">*.${s} ${t}</div>\n                </div>\n                <button class="three-dots__btn" onclick="moreBtn(this)">\n                    <i class="three-dots__icon"></i>\n                </button>\n            </div>`;i.insertAdjacentHTML("beforeend",o)}function c(e,t){var n=new XMLHttpRequest,a=new FormData;n.open("POST","https://api.cloudinary.com/v1_1/joezimim007/image/upload",!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.upload.addEventListener("progress",(function(e){l(t,100*e.loaded/e.total||100)})),n.addEventListener("readystatechange",(function(e){4==n.readyState&&200==n.status?l(t,100):4==n.readyState&&n.status})),a.append("upload_preset","ujpu6gyk"),a.append("file",e),n.send(a)}}if(document.querySelector(".main-table__btn-wrapper .btn")){document.querySelectorAll(".main-table__btn-wrapper .btn").forEach(e=>{document.addEventListener("click",t=>{t.target==e&&e.closest(".main-table__btn-wrapper").classList.toggle("active"),t.target!=e&&t.target!=e.closest(".main-table__btn-wrapper")&&t.target!=e.closest(".main-table__btn-wrapper").querySelector(".main-table__link")&&e.closest(".main-table__btn-wrapper").classList.remove("active")})})}if(document.querySelector(".task .custom-form input")){let e=document.querySelector(".custom-form").querySelector("#task-files"),t=document.querySelector(".custom-form__file-list");const n=new DataTransfer;n.items.add(new File([],"a.txt")),e.files=n.files,e.addEventListener("change",n=>{const a=new DataTransfer;t.innerHTML="";for(let n=0;n<e.files.length;n++){let s=e.files[n];a.items.add(s);let i='<div class="custom-form__file-item">'+s.name+'<a class="custom-form__file-delete" data-number='+n+">x</a></div>";t.insertAdjacentHTML("beforeend",i)}e.onchange=null,e.files=a.files,document.querySelector(".custom-form__file-item")&&document.querySelectorAll(".custom-form__file-delete").forEach(t=>{t.addEventListener("click",(function(n){const a=new DataTransfer;for(let n=0;n<e.files.length;n++)if(n!=t.dataset.number){let t=e.files[n];a.items.add(t)}e.onchange=null,e.files=a.files,fadeDelete(500,t.closest(".custom-form__file-item"))}))})})}if(document.querySelector(".main-table__rating-item")){let e=document.querySelectorAll(".main-table__rating-item");for(let t=0;t<e.length;t++){var d;let n=e[t];n.addEventListener("mouseover",()=>{n.dataset.rating<3?d="main-table__rating-item--low":3==n.dataset.rating?d="main-table__rating-item--medium":n.dataset.rating>3&&(d="main-table__rating-item--high"),n.closest(".main-table__row ").querySelectorAll(".main-table__rating-item").forEach(e=>{e.dataset.rating<=n.dataset.rating&&e.classList.add(d)})}),n.addEventListener("mouseout",()=>{e.forEach(e=>{e.dataset.rating<=n.dataset.rating&&e.classList.remove(d)})})}}if(jQuery((function(e){e(document).ready((function(){e((function(){e('[data-toggle="popover"]').popover()}))}))})),document.querySelector(".line-form__icon--pass-visible")){let e=document.querySelector(".line-form__icon--pass-visible"),t=e.querySelector(".line-form__icon-svg use"),n=e.closest("form").querySelectorAll("input[type=password]");e.addEventListener("click",(function(e){if("http://192.168.88.59/wp-content/uploads/2021/02/sprite.svg#pass-visible"==t.href.baseVal){t.href.baseVal="http://192.168.88.59/wp-content/uploads/2021/02/sprite.svg#pass-invisible";for(let e=0;n.length>e;e++)n[e].type="text"}else{t.href.baseVal="http://192.168.88.59/wp-content/uploads/2021/02/sprite.svg#pass-visible";for(let e=0;n.length>e;e++)n[e].type="password"}}))}if(jQuery((function(e){e(document).ready((function(){if(document.getElementById("registration-form")){let t=document.getElementById("registration-form");document.getElementById("registration-btn").addEventListener("click",n=>{n.preventDefault();let a=new FormData(t);a.append("action","handler"),a.append("nonce_code",myajax.nonce),a.append("function","registration"),e.ajax({url:ajaxurl,type:"POST",contentType:!1,processData:!1,data:a,success:function(e){e.split("[").join("").split("]").slice(0,-1).forEach(e=>{toast("Ошибка",e,"validation-error")})}}),ajaxDataReset()})}}))})),document.querySelector("input[type=tel]")){let e=document.querySelectorAll("input[type=tel]");for(let t=0;e.length>t;t++)e[t].addEventListener("input",(function(e){let t=e.target.value.replace(/\D/g,"").match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);e.target.value=(t[1]?" 8":"")+(t[2]?" "+t[2]:"")+(t[3]?"-"+t[3]:"")+(t[4]?"-"+t[4]:"")+(t[5]?"-"+t[5]:"")}))}}));