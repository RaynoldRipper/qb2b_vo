"use strict";var renderedItem,render=0;function fadeDelete(e,t){t.style.transition="all ."+e+"s",t.style.opacity="0",setTimeout(()=>{t.style.display="none",t.remove()},e)}function hide(e,t){t.style.transition="all ."+e+"s",t.style.opacity="0",setTimeout(()=>{t.style.display="none"},e)}function show(e,t){t.style.display="block",setTimeout(()=>{t.style.transition="all ."+e+"s",t.style.opacity="1"},1)}function onClickClose(e){var t=0;document.addEventListener("click",(function n(i){if(!e.contains(i.target)&&isVisible(e)&&1==t){if(fadeDelete(300,e),render=0,renderedItem=null,document.removeEventListener("click",n),t=0,e.closest(".company__documents-item").querySelector(".three-dots__btn")){e.closest(".company__documents-item").querySelector(".three-dots__btn").classList.remove("active")}}else t=1}))}function isVisible(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function moreBtn(e){if(event.preventDefault(),e.closest(".company__documents-item")){let t=e.closest(".company__documents-item"),n='<div class="poop">\n                    <h2 class="text-5 wrapper-title pb-1">Действие</h2>\n                    <div class="poop__buttons">\n                        <a href="#" class="poop__btn text-3 poop__btn--success">Скачать файл</a>\n                        <a href="#" class="poop__btn text-3 poop__btn--warninig">Удалить</a>\n                    </div>\n                </div>';if(t!==renderedItem&&null===t.querySelector(".poop")&&0===render){e.classList.add("active"),t.insertAdjacentHTML("beforeend",n),renderedItem=t;let i=t.querySelector(".poop");show(300,i),render=1,onClickClose(i)}else if(t!==renderedItem&&null!=renderedItem&&1===render){let i=renderedItem.querySelector(".poop");renderedItem.querySelector(".three-dots__btn").classList.remove("active"),fadeDelete(300,i),t.insertAdjacentHTML("beforeend",n),e.classList.add("active"),renderedItem=t;let s=t.querySelector(".poop");show(500,s),onClickClose(s),render=1}else if(t==renderedItem&&1===render){let e=renderedItem.querySelector(".poop");renderedItem.querySelector(".three-dots__btn").classList.remove("active"),fadeDelete(300,e),renderedItem="",render=0}}}document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelector(".menu"),t=document.querySelector(".menu__list"),n=document.querySelector(".settings"),i=document.querySelector(".settings__window");if(e.addEventListener("click",(function(){e.classList.toggle("active"),t.classList.toggle("active")})),n.addEventListener("click",(function(){n.classList.toggle("active"),i.classList.toggle("active")})),document.querySelector(".line-form")){let e=document.querySelector(".line-form"),t=(document.querySelectorAll(".line-form__field"),e.querySelectorAll("input[type=text],input[type=tel], input[type=password]"));setTimeout(()=>{t.forEach(e=>{let t=e.closest(".line-form__field");e.value.length>0&&t.classList.add("line-form__field--filled")})},10),t.forEach(e=>{e.addEventListener("focus",e=>{e.target.closest(".line-form__field").classList.add("field-focus")}),e.addEventListener("blur",e=>{e.target.closest(".line-form__field").classList.remove("field-focus")}),e.addEventListener("input",t=>{let n=e.closest(".line-form__field");e.value.length>0?n.classList.add("line-form__field--filled"):e.value.length<=0&&n.classList.remove("line-form__field--filled")})})}if(document.querySelector("input[type=text], input[type=number], input[type=tel]")&&!document.querySelector(".line-form")){document.querySelectorAll("input[type=text], input[type=number], input[type=tel], textarea").forEach(e=>{e.addEventListener("input",(function(){var t;e.classList.contains("custom-form__input")?t=".custom-form__input-wrapper":e.classList.contains("custom__text-input")&&(t=".custom__text"),!e.closest(t).classList.contains("input__filled")&&e.value.length>=1?e.closest(t).classList.add("input__filled"):e.value.length<=0&&e.closest(t).classList.remove("input__filled")}))})}if(document.querySelector("input[type=range]")){let e=document.querySelectorAll("input[type=range]"),t=["webkit-slider-runnable","moz-range"],n=[],i=t.length,s=e.length,r=function(e,n){let s="",r=e.min||0,l=(e.max?~~(100*(e.value-r)/(e.max-r)):e.value)+"% 100%";e.previousElementSibling.querySelector(".range__count").textContent=e.value,e.previousElementSibling.querySelector(".range__total").classList.contains("hide")||(e.previousElementSibling.querySelector(".range__total").classList.add("hide"),e.previousElementSibling.querySelector(".range__count").classList.add("active")),e.value<=0&&(e.previousElementSibling.querySelector(".range__total").classList.remove("hide"),e.previousElementSibling.querySelector(".range__count").classList.remove("active"));for(let e=0;e<i;e++)s+="input[type=range][data-rangeId='"+n+"']::-"+t[e]+"-track{background-size:"+l+"} ";return s},l=function(e){let t=r(e.target,this);n[this].textContent=t};for(let t=0;t<s;t++){let i=document.createElement("style");document.body.appendChild(i),n.push(i),e[t].setAttribute("data-rangeId",t),e[t].addEventListener("input",l.bind(t))}e.forEach(e=>{e.addEventListener("input",(function(){let t=e.previousElementSibling.querySelector(".range__count"),n=this.scrollHeight,i=n/2+(this.valueAsNumber-parseInt(this.min))*(this.scrollWidth-n)/(parseInt(this.max)-parseInt(this.min));t.style.left=i-t.offsetWidth/2+"px",this.value>0?this.classList.add("active"):this.classList.remove("active")}))})}if(document.querySelector(".drop-form")){document.querySelector(".drop-form");let e=document.querySelector(".company__drop-field");function s(e){e.preventDefault(),e.stopPropagation()}function r(t){e.classList.add("dragged")}function l(t){e.classList.remove("dragged")}["dragenter","dragover","dragleave","drop"].forEach(t=>{e.addEventListener(t,s,!1),document.body.addEventListener(t,s,!1)}),["dragenter","dragover"].forEach(t=>{e.addEventListener(t,r,!1)}),["dragleave","drop"].forEach(t=>{e.addEventListener(t,l,!1)}),e.addEventListener("drop",(function(e){!function(e){e=[...e],console.log(e),function(e){n.value=0,t=[];for(let n=e;n>0;n--)t.push(0)}(e.length),e.forEach(c),e.forEach(a)}(e.dataTransfer.files)}),!1);let t=[],n=document.querySelector(".progress-bar");function o(e,i){t[e]=i;let s=t.reduce((e,t)=>e+t,0)/t.length;console.debug("update",e,i,s),n.style.width=s+"%"}function a(e){let t,n=(e.size/1024/1024).toFixed(2),i=(e.size/1024).toFixed(2),s=e.name.split(".")[e.name.split(".").length-1],r=document.querySelector(".company__documents-list");t=n<.1?i+" kb":n+"mb";let l=`\n            <div class="company__documents-item mb-3">\n                <div class="company__documents-picture">\n                    <img class="company__documents-image" src="./img/dest/mime-image.png" alt="">\n                </div>\n                <div class="company__documents-descriptins">\n                    <div class="company__documents-name text-4">${e.name}</div>\n                    <div class="company__documents-type text-3">*.${s} ${t}</div>\n                </div>\n                <button class="three-dots__btn" onclick="moreBtn(this)">\n                    <i class="three-dots__icon"></i>\n                </button>\n            </div>`;r.insertAdjacentHTML("beforeend",l)}function c(e,t){var n=new XMLHttpRequest,i=new FormData;n.open("POST","https://api.cloudinary.com/v1_1/joezimim007/image/upload",!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.upload.addEventListener("progress",(function(e){o(t,100*e.loaded/e.total||100)})),n.addEventListener("readystatechange",(function(e){4==n.readyState&&200==n.status?o(t,100):4==n.readyState&&n.status})),i.append("upload_preset","ujpu6gyk"),i.append("file",e),n.send(i)}}if(document.querySelector(".main-table__btn-wrapper .btn")){document.querySelectorAll(".main-table__btn-wrapper .btn").forEach(e=>{document.addEventListener("click",t=>{t.target==e&&e.closest(".main-table__btn-wrapper").classList.toggle("active"),t.target!=e&&t.target!=e.closest(".main-table__btn-wrapper")&&t.target!=e.closest(".main-table__btn-wrapper").querySelector(".main-table__link")&&e.closest(".main-table__btn-wrapper").classList.remove("active")})})}if(document.querySelector(".task .custom-form input")){let e=document.querySelector(".custom-form").querySelector("#task-files"),t=document.querySelector(".custom-form__file-list");const n=new DataTransfer;n.items.add(new File([],"a.txt")),e.files=n.files,e.addEventListener("change",n=>{const i=new DataTransfer;t.innerHTML="";for(let n=0;n<e.files.length;n++){let s=e.files[n];i.items.add(s);let r='<div class="custom-form__file-item">'+s.name+'<a class="custom-form__file-delete" data-number='+n+">x</a></div>";t.insertAdjacentHTML("beforeend",r)}e.onchange=null,e.files=i.files,document.querySelector(".custom-form__file-item")&&document.querySelectorAll(".custom-form__file-delete").forEach(t=>{t.addEventListener("click",(function(n){const i=new DataTransfer;for(let n=0;n<e.files.length;n++)if(n!=t.dataset.number){let t=e.files[n];i.items.add(t)}e.onchange=null,e.files=i.files,fadeDelete(500,t.closest(".custom-form__file-item"))}))})})}if(document.querySelector(".main-table__rating-item")){let e=document.querySelectorAll(".main-table__rating-item");for(let t=0;t<e.length;t++){var d;let n=e[t];n.addEventListener("mouseover",()=>{n.dataset.rating<3?d="main-table__rating-item--low":3==n.dataset.rating?d="main-table__rating-item--medium":n.dataset.rating>3&&(d="main-table__rating-item--high"),n.closest(".main-table__row ").querySelectorAll(".main-table__rating-item").forEach(e=>{e.dataset.rating<=n.dataset.rating&&e.classList.add(d)})}),n.addEventListener("mouseout",()=>{e.forEach(e=>{e.dataset.rating<=n.dataset.rating&&e.classList.remove(d)})})}}$((function(){$('[data-toggle="popover"]').popover()}))}));